/*!
	Slimbox v2.04 - The ultimate lightweight Lightbox clone for jQuery
	(c) 2007-2010 Christophe Beyls <http://www.digitalia.be>
	MIT-style license.
*/
jQuery.noConflict();(function(C){var K=C(window),z,f,L=-1,s,D,J,A,E,S,w,r=!window.XMLHttpRequest,x=[],q=document.documentElement,n={},y=new Image(),Q=new Image(),N,a,g,u,O,d,M,c,G,R;C(function(){C("body").append(C([N=C('<div id="lbOverlay" />')[0],a=C('<div id="lbCenter" />')[0],M=C('<div id="lbBottomContainer" />')[0]]).css("display","none"));g=C('<div id="lbImage" />').appendTo(a).append(u=C('<div style="position: relative;" />').append([O=C('<a id="lbPrevLink" href="#" />').click(H)[0],d=C('<a id="lbNextLink" href="#" />').click(e)[0]])[0])[0];c=C('<div id="lbBottom" />').appendTo(M).append([C('<a id="lbCloseLink" href="#" />').add(N).click(I)[0],G=C('<div id="lbCaption" />')[0],R=C('<div id="lbNumber" />')[0],C('<div style="clear: both;" />')[0]])[0]});C.slimbox=function(V,U,T){resizeduration=(11-resizeSpeed)*150;z=C.extend({loop:false,overlayOpacity:0.8,overlayFadeDuration:400,resizeDuration:resizeduration,resizeEasing:"swing",initialWidth:250,initialHeight:250,imageFadeDuration:400,captionAnimationDuration:400,counterText:joomgallery_image+" {x} "+joomgallery_of+"  {y}",closeKeys:[27,88,67],previousKeys:[37,80],nextKeys:[39,78],winWidth:(getWidth()>0)?getWidth():1024,winHeight:(getHeight()>0)?getHeight():800},T);if(typeof V=="string"){V=[[V,U]];U=0}E=K.scrollTop()+(K.height()/2);S=z.initialWidth;w=z.initialHeight;C(a).css({top:Math.max(0,E-(w/2)),width:S,height:w,marginLeft:-S/2}).show();A=r||(N.currentStyle&&(N.currentStyle.position!="fixed"));if(A){N.style.position="absolute"}C(N).css("opacity",z.overlayOpacity).fadeIn(z.overlayFadeDuration);F();l(1);f=V;z.loop=z.loop&&(f.length>1);return b(U)};C.fn.slimbox=function(T,W,V){W=W||function(X){return[X.href,X.title]};V=V||function(){return true};var U=this;return U.unbind("click").click(function(){var Z=this,ab=0,aa,X=0,Y;aa=C.grep(U,function(ad,ac){return V.call(Z,ad,ac)});for(Y=aa.length;X<Y;++X){if(aa[X]==Z){ab=X}aa[X]=W(aa[X],X)}return C.slimbox(aa,ab,T)})};function F(){var U=K.scrollLeft(),T=K.width();C([a,M]).css("left",U+(T/2));if(A){C(N).css({left:U,top:K.scrollTop(),width:T,height:K.height()})}}function l(T){if(T){C("object").add(r?"select":"embed").each(function(V,W){x[V]=[W,W.style.visibility];W.style.visibility="hidden"})}else{C.each(x,function(V,W){W[0].style.visibility=W[1]});x=[]}var U=T?"bind":"unbind";K[U]("scroll resize",F);C(document)[U]("keydown",t)}function t(V){var U=V.keyCode,T=C.inArray;return(T(U,z.closeKeys)>=0)?I():(T(U,z.nextKeys)>=0)?e():(T(U,z.previousKeys)>=0)?H():false}function H(){return b(D)}function e(){return b(J)}function b(T){if(T>=0){L=T;s=f[L][0];D=(L||(z.loop?f.length:0))-1;J=((L+1)%f.length)||(z.loop?0:-1);v();a.className="lbLoading";n=new Image();n.onload=j;n.src=s}return false}function j(){a.className="";if(typeof window.innerWidth!="undefined"){winWidth=window.innerWidth;winHeight=window.innerHeight}else{if(typeof document.documentElement!="undefined"&&typeof document.documentElement.clientWidth!="undefined"&&document.documentElement.clientWidth!=0){winWidth=document.documentElement.clientWidth;winHeight=document.documentElement.clientHeight}else{winWidth=document.getElementsByTagName("body")[0].clientWidth;winHeight=document.getElementsByTagName("body")[0].clientHeight}}if(resizeJsImage==1){if(n.width>(winWidth*0.99)){n.height=(n.height*(winWidth*0.99))/n.width;n.width=winWidth*0.99}if(n.height>(winHeight*0.88)){n.width=(n.width*(winHeight*0.88))/n.height;n.height=winHeight*0.88}innerImageHtml='<img src="'+f[L][0]+'" width="'+n.width+'" height="'+n.height+'" />';if(C("#sbimg").length<1){imgelem=new Element("img",{id:"sbimg"});imgelem.inject(g)}imgelem.setProperty("src",f[L][0]);imgelem.setProperty("width",n.width);imgelem.setProperty("height",n.height)}else{C(g).style.backgroundImage="url("+f[L][0]+")"}C(g).css({width:n.width,visibility:"hidden",display:""});C(u).width(n.width);C([O,d]).height(n.height);C(G).html(f[L][1]||"");uniquearr=new Array();uniquearr=B(f);uniquecount=P(uniquearr);uniquemaxid=k(uniquearr,f.length);changed=false;while(!uniquearr[L]){L++;changed=true;J++}while(!uniquearr[D]&&D>=0){D--}if(changed){while(!uniquearr[J]&&J<=uniquemaxid){J++}if(J>uniquemaxid){J=-1}}if(D<0){imageactcounter=1}else{imageactcounter=m(uniquearr,f.length,L)}C(R).html((((f.length>1)&&z.counterText)||"").replace(/{x}/,L+1).replace(/{y}/,f.length));if(D>=0){y.src=f[D][0]}if(J>=0){Q.src=f[J][0]}S=g.offsetWidth;w=g.offsetHeight;var T=Math.max(0,E-(w/2))-35;if(a.offsetHeight!=w){C(a).animate({height:w,top:T},z.resizeDuration,z.resizeEasing)}if(a.offsetWidth!=S){C(a).animate({width:S,marginLeft:-S/2},z.resizeDuration,z.resizeEasing)}C(a).queue(function(){C(M).css({width:S,top:T+w,marginLeft:-S/2,visibility:"hidden",display:""});C(g).css({display:"none",visibility:"",opacity:""}).fadeIn(z.imageFadeDuration,h)})}function h(){if(D>=0){C(O).show()}if(J>=0){C(d).show()}C(c).css("marginTop",-c.offsetHeight).animate({marginTop:0},z.captionAnimationDuration);M.style.visibility=""}function v(){n.onload=null;n.src=y.src=Q.src=s;C([a,g,c]).stop(true);C([O,d,g,M]).hide()}function I(){if(L>=0){v();L=D=J=-1;C(a).hide();C(N).stop().fadeOut(z.overlayFadeDuration,l)}return false}function B(T){o={};ilength=T.length;for(i=0;i<ilength;i++){o[T[i]["0"]]=i}p=new Array();for(i in o){p[o[i]]=true}return p}function P(T){arrlength=T.length;uniquelength=arrlength;for(i=0;i<arrlength;i++){if(!T[i]){uniquelength--}}return uniquelength}function k(U,T){maxid=0;for(i=0;i<=T;i++){if(U[i]){maxid=Math.max(maxid,i)}}return maxid}function m(V,U,T){actcount=0;for(i=0;i<=U;i++){if(V[i]){actcount++;if(i==T){break}}}return actcount}})(jQuery);if(!/android|iphone|ipod|series60|symbian|windows ce|blackberry/i.test(navigator.userAgent)){jQuery(function(a){a("a[rel^='lightbox']").slimbox({},null,function(b){return(this==b)||((this.rel.length>8)&&(this.rel==b.rel))})})};