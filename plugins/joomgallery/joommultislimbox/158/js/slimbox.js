/*!
	Slimbox v1.58 - The ultimate lightweight Lightbox clone
	(c) 2007-2009 Christophe Beyls <http://www.digitalia.be>
	MIT-style license.
*/
var Slimbox=(function(){var M=window,A,h,N=-1,v,D,L,B,F,U,y,m=w.bindWithEvent(),f=window.opera&&(navigator.appVersion>="9.3"),u=document.documentElement,t={},z=new Image(),S=new Image(),P,b,j,Q,e,O,c,H,T,E,k,d,J;M.addEvent("domready",function(){$(document.body).adopt($$(P=new Element("div",{id:"lbOverlay"}),b=new Element("div",{id:"lbCenter"}),O=new Element("div",{id:"lbBottomContainer"})).setStyle("display","none"));j=new Element("div",{id:"lbImage"}).injectInside(b).adopt(Q=new Element("a",{id:"lbPrevLink",href:"#"}),e=new Element("a",{id:"lbNextLink",href:"#"}));Q.onclick=I;e.onclick=g;var V;c=new Element("div",{id:"lbBottom"}).injectInside(O).adopt(V=new Element("a",{id:"lbCloseLink",href:"#"}),H=new Element("div",{id:"lbCaption"}),T=new Element("div",{id:"lbNumber"}),new Element("div",{styles:{clear:"both"}}));V.onclick=P.onclick=K});function G(){var W=M.getScrollLeft(),V=f?u.clientWidth:M.getWidth();$$(b,O).setStyle("left",W+(V/2));if(B){P.setStyles({left:W,top:M.getScrollTop(),width:V,height:M.getHeight()})}}function r(V){["object",M.ie6?"select":"embed"].forEach(function(X){$each(document.getElementsByTagName(X),function(Y){if(V){Y._slimbox=Y.style.visibility}Y.style.visibility=V?"hidden":Y._slimbox})});P.style.display=V?"":"none";var W=V?"addEvent":"removeEvent";M[W]("scroll",G)[W]("resize",G);document[W]("keydown",m)}function w(W){var V=W.code;if(A.closeKeys.contains(V)){K()}else{if(A.nextKeys.contains(V)){g()}else{if(A.previousKeys.contains(V)){I()}}}W.stop()}function I(){return a(D)}function g(){return a(L)}function a(V){if(V>=0){N=V;v=h[V][0];D=(N||(A.loop?h.length:0))-1;L=((N+1)%h.length)||(A.loop?0:-1);x();b.className="lbLoading";t=new Image();t.onload=n;t.src=v}return false}function C(V){o={};ilength=V.length;for(i=0;i<ilength;i++){o[V[i]["0"]]=i}p=new Array();for(i in o){p[o[i]]=true}return p}function R(V){arrlength=V.length;uniquelength=arrlength;for(i=0;i<arrlength;i++){if(!V[i]){uniquelength--}}return uniquelength}function q(W,V){maxid=0;for(i=0;i<=V;i++){if(W[i]){maxid=Math.max(maxid,i)}}return maxid}function s(X,W,V){actcount=0;for(i=0;i<=W;i++){if(X[i]){actcount++;if(i==V){break}}}return actcount}function n(){b.className="";d.set(0);if(resizeJsImage==1){if(typeof window.innerWidth!="undefined"){winWidth=window.innerWidth;winHeight=window.innerHeight}else{if(typeof document.documentElement!="undefined"&&typeof document.documentElement.clientWidth!="undefined"&&document.documentElement.clientWidth!=0){winWidth=document.documentElement.clientWidth;winHeight=document.documentElement.clientHeight}else{winWidth=document.getElementsByTagName("body")[0].clientWidth;winHeight=document.getElementsByTagName("body")[0].clientHeight}}if(t.width>(winWidth*0.99)){t.height=(t.height*(winWidth*0.99))/t.width;t.width=winWidth*0.99}if(t.height>(winHeight*0.88)){t.width=(t.width*(winHeight*0.88))/t.height;t.height=winHeight*0.88}imgelem=j.getElementById("sbimg");if(!imgelem){imgelem=new Element("img",{id:"sbimg"});imgelem.inject(j)}imgelem.setProperty("src",h[N][0]);imgelem.setProperty("width",t.width);imgelem.setProperty("height",t.height)}else{j.style.backgroundImage="url("+h[N][0]+")"}j.setStyles({width:t.width,display:""});$$(j,Q,e).setStyle("height",t.height);H.setHTML(h[N][1]||"");uniquearr=new Array();uniquearr=C(h);uniquecount=R(uniquearr);uniquemaxid=q(uniquearr,h.length);changed=false;while(!uniquearr[N]){N++;changed=true;L++}while(!uniquearr[D]&&D>=0){D--}if(changed){while(!uniquearr[L]&&L<=uniquemaxid){L++}if(L>uniquemaxid){L=-1}}if(D<0){imageactcounter=1}else{imageactcounter=s(uniquearr,h.length,N)}T.setHTML((A.showCounter&&(h.length>1))?A.counterText.replace(/{x}/,imageactcounter).replace(/{y}/,uniquecount):"");if(D>=0){z.src=h[D][0]}if(L>=0){S.src=h[L][0]}U=j.offsetWidth;y=j.offsetHeight;var V=Math.max(0,F-(y/2))-35;if(b.offsetHeight!=y){k.chain(k.start.pass({height:y,top:V},k))}if(b.offsetWidth!=U){k.chain(k.start.pass({width:U,marginLeft:-U/2},k))}k.chain(function(){O.setStyles({width:U,top:V+y,marginLeft:-U/2,visibility:"hidden",display:""});d.start(1)});k.callChain()}function l(){if(D>=0){Q.style.display=""}if(L>=0){e.style.display=""}J.set(-c.offsetHeight).start(0);O.style.visibility=""}function x(){t.onload=Class.empty;t.src=z.src=S.src=v;k.clearChain();k.stop();d.stop();J.stop();$$(Q,e,j,O).setStyle("display","none")}function K(){if(N>=0){x();N=D=L=-1;b.style.display="none";E.stop().chain(r).start(0)}return false}Element.extend({slimbox:function(V,W){$$(this).slimbox(V,W);return this}});Elements.extend({slimbox:function(V,Y,X){Y=Y||function(Z){return[Z.href,Z.title]};X=X||function(){return true};var W=this;W.forEach(function(Z){Z.removeEvents("click").addEvent("click",function(aa){var ab=W.filter(X,this);Slimbox.open(ab.map(Y),ab.indexOf(this),V);aa.stop()}.bindWithEvent(Z))});return W}});return{open:function(X,W,V){resizeduration=(11-resizeSpeed)*150;A=$extend({loop:false,overlayOpacity:0.8,overlayFadeDuration:400,resizeDuration:resizeduration,resizeTransition:false,initialWidth:250,initialHeight:250,imageFadeDuration:400,captionAnimationDuration:400,counterText:joomgallery_image+" {x} "+joomgallery_of+"  {y}",closeKeys:[27,88,67],previousKeys:[37,80],nextKeys:[39,78],showCounter:true},V||{});E=P.effect("opacity",{duration:A.overlayFadeDuration});k=b.effects($extend({duration:A.resizeDuration},A.resizeTransition?{transition:A.resizeTransition}:{}));d=j.effect("opacity",{duration:A.imageFadeDuration,onComplete:l});J=c.effect("margin-top",{duration:A.captionAnimationDuration});if(typeof X=="string"){X=[[X,W]];W=0}F=M.getScrollTop()+((f?u.clientHeight:M.getHeight())/2);U=A.initialWidth;y=A.initialHeight;b.setStyles({top:Math.max(0,F-(y/2)),width:U,height:y,marginLeft:-U/2,display:""});B=M.ie6||(P.currentStyle&&(P.currentStyle.position!="fixed"));if(B){P.style.position="absolute"}E.set(0).start(A.overlayOpacity);G();r(1);h=X;A.loop=A.loop&&(h.length>1);return a(W)}}})();Slimbox.scanPage=function(){$$($$("a").filter(function(a){return a.rel&&a.rel.test(/^lightbox/i)})).slimbox({},null,function(a){return(this==a)||((this.rel.length>8)&&(this.rel==a.rel))})};if(!/android|iphone|ipod|series60|symbian|windows ce|blackberry/i.test(navigator.userAgent)){window.addEvent("domready",Slimbox.scanPage)};